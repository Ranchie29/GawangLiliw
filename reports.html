<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Message | Gawang Liliw</title>
  <link href="https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css" rel="stylesheet" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" />
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet"/>
  <link rel="stylesheet" href="reports.css" />
</head>
<body>
<div class="wrapper">
  <!-- Sidebar -->
  <div class="sidebar">
    <div class="sidebar-header">
      <div class="logo-container d-flex align-items-center">
        <img src="static/photos/logo.png" alt="Gawang Liliw Logo" class="logo-image" />
      </div>
      <div class="user-info">
        <div class="user-details">
          <span class="user-name" id="userName">--</span>
          <span class="user-role">Administrator</span>
        </div>
      </div>
    </div>

    <nav class="sidebar-nav">
      <div class="nav-section">
        <a href="Dashboard.html" class="nav-link">
          <i class='bx bxs-dashboard'></i>
          <span>Dashboard</span>
        </a>
        <a href="store.html" class="nav-link">
          <i class='bx bx-user-check'></i>
          <span>Seller Approval</span>
        </a>
        <a href="reports.html" class="nav-link active">
          <i class='bx bx-message-dots'></i>
          <span>Messages</span>
        </a>
        <a href="Announcement.html" class="nav-link"><i class='bx bxs-megaphone'></i><span>Events Announcement</span></a>
      <a href="admin-account.html" class="nav-link">
        <i class='bx bx-user-circle'></i>
        <span>Account</span>
      </a>
      </div>
    </nav>

    <div class="sidebar-footer">
      <a href="#" id="logoutButton" class="nav-link">
        <i class='bx bx-log-out'></i>
        <span>Log Out</span>
      </a>
    </div>
  </div>

  <!-- Main Content -->
  <div class="main-content">
    <div class="flex-grow-1 p-4">
      <!-- Top Header -->
      <header class="header">
        <div class="header-title">
          <h1 class="mb-0">Message Overview</h1>
          <p class="text-muted mb-0">Communicate directly with sellers</p>
        </div>

        <div class="notification-wrapper">
          <button class="notification-btn" id="notificationToggle">
            <i class='bx bx-bell'></i>
            <span class="notification-badge" id="notificationCount">0</span>
          </button>
          <div class="notification-dropdown" id="notificationDropdown">
            <div class="notification-title">Recent Activity</div>
            <ul id="notificationList" class="notification-list">
              <li class="dropdown-item text-center text-muted">No new notifications</li>
            </ul>
          </div>
        </div>
      </header>

      <!-- Messaging Interface -->
      <div class="row">
        <!-- Seller List -->
        <div class="col-md-4">
          <div class="card shadow-sm mb-4">
            <div class="card-header">
              <span>Sellers</span>
              <i class="fas fa-users"></i>
            </div>
            <div class="card-body p-0">
              <ul class="list-group list-group-flush" id="sellerList">
                <li class="list-group-item text-center text-muted">Loading sellers...</li>
              </ul>
            </div>
          </div>
        </div>

        <!-- Message Thread -->
        <div class="col-md-8">
          <div class="card shadow-sm mb-4">
            <div class="card-header bg-light d-flex justify-content-between align-items-center">
              <strong>Conversation with <span id="selectedSellerName">Select a seller</span></strong>
              <i class="fas fa-comments"></i>
            </div>
            <div class="card-body message-thread" id="messageThread">
              <div class="text-center p-4 text-muted welcome-message">
                <i class="fas fa-comment-alt fa-3x mb-3"></i>
                <h5>Welcome to Messages</h5>
                <p>Select a seller from the list to start or continue a conversation.</p>
              </div>
            </div>
            <div class="card-footer">
              <form id="messageForm" class="d-flex">
                <input 
                  type="text" 
                  id="messageInput" 
                  class="form-control me-2" 
                  placeholder="Select a seller to start messaging..." 
                  disabled 
                />
                <button class="btn btn-primary" type="submit" id="sendButton" disabled>
                  <i class="fas fa-paper-plane"></i>
                </button>
              </form>
            </div>
          </div>
        </div>
      </div>

      <!-- Toast Notification -->
      <div class="toast-container">
        <div class="toast" id="toastNotification">
          <div class="toast-content">
            <i class="fas fa-check-circle" id="toastIcon"></i>
            <span class="toast-message" id="toastMessage">Message sent!</span>
          </div>
          <button class="toast-close" id="toastClose">
            <i class="fas fa-times"></i>
          </button>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- Scripts -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
<script type="module" src="firebase-config.js"></script>
<script type="module" src="firebase-auth.js"></script>
<script type="module" src="report.js"></script>
</body>
</html>